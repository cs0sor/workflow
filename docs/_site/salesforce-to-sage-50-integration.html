<!DOCTYPE html>
<html lang="en">
<head>
    <title>Salesforce to Sage 50 Integration</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,600,900" rel="stylesheet">
    <link rel="stylesheet" href="css/github.css">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/style.css">
 </head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="xcontainer">
        <div class="navbar-header">
            <a class="navbar-brand" title="Go to Zynk.com" href="http://zynk.com"><img class="img-responsive" id="logo-main" src="assets/logo.svg" alt="Click here to visit Zynk.com" /></a>
        </div>
        <div id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li class="topnav-2"><a href="mailto:support@zynk.com">support@zynk.com</a></li>
                </ul>
        </div>
    </div>
</nav>

<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper" class="sidebar-nav">
        
        <h1>Zynk Workflow Documentation</h1>
<ul>
  <li><a href="index">Home</a>
    <ul>
      <li>[[Getting Started]]</li>
      <li>[[Key Concepts]]</li>
      <li>[[Using Zynk]]</li>
      <li>[[Settings]]</li>
      <li>[[Extensions]]</li>
      <li>[[Integrations]]</li>
    </ul>
  </li>
  <li>[[Accounting]]
    <ul>
      <li>[[Sage 50 UK]]</li>
      <li>[[Sage 200]]</li>
      <li>[[Sage 200 Online]]</li>
      <li>[[Xero]]</li>
      <li>[[Kashflow]]</li>
      <li>[[Quickbooks Online]]</li>
      <li>[[Sage 50 US]]</li>
      <li>[[Brightpearl]]</li>
      <li>[[Sage One]]</li>
      <li>[[Sage 50 Payroll]]</li>
      <li>[[Sage 50 UK Reporting]]</li>
    </ul>
  </li>
  <li>[[CRM]]
    <ul>
      <li>[[ACT]]</li>
      <li>[[AutoTask]]</li>
      <li>[[BXP]]</li>
      <li>[[Campaign Monitor]]</li>
      <li>[[ConnectWise]]</li>
      <li>[[Salesforce]]</li>
      <li>[[Sugar CRM]]</li>
      <li>[[Zoho CRM]]</li>
    </ul>
  </li>
  <li>[[Databases]]
    <ul>
      <li>[[SQL Server]]</li>
      <li>[[SQLite]]</li>
      <li>[[ODBC]]</li>
      <li>[[OLEDB]]</li>
    </ul>
  </li>
  <li>[[Ecommerce]]
    <ul>
      <li>[[Amazon Marketplace]]</li>
      <li>[[Amazon Vendor Central]]</li>
      <li>[[BigCommerce]]</li>
      <li>[[Channel Advisor]]</li>
      <li>[[CoreCommerce]]</li>
      <li>[[Easy Webstore]]</li>
      <li>[[Ebay]]</li>
      <li>[[EKM Powershop]]</li>
      <li>[[Magento V1]]</li>
      <li>[[Magento V2]]</li>
      <li>[[PayPal]]</li>
      <li>[[Shopify]]</li>
      <li>[[WooCommerce]]</li>
    </ul>
  </li>
  <li>[[Files]]
    <ul>
      <li>[[CSV]]</li>
      <li>[[HTML]]</li>
      <li>[[Excel]]</li>
      <li>[[File]]</li>
      <li>[[File Helpers]]</li>
      <li>[[JSON]]</li>
      <li>[[PDF]]</li>
      <li>[[XML and XSLT]]</li>
    </ul>
  </li>
  <li>[[Cloud]]
    <ul>
      <li>[[Amazon S3]]</li>
    </ul>
  </li>
  <li>[[Social]]
    <ul>
      <li>[[LinkedIn]]</li>
      <li>[[Twitter]]</li>
      <li>[[Facebook]]</li>
    </ul>
  </li>
  <li>[[Web]]
    <ul>
      <li>[[Email]]</li>
      <li>[[FTP]]</li>
      <li>[[SFTP]]</li>
      <li>[[HTTP]]</li>
    </ul>
  </li>
  <li>[[Other]]
    <ul>
      <li>[[Developer]]</li>
      <li>[[SMS]]</li>
      <li>[[User Interface]]</li>
      <li>[[WordPress]]</li>
      <li>[[Zynk Core]]</li>
    </ul>
  </li>
  <li>[[Contact Us]]</li>
</ul>

    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 markdown-body">
                    <a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a>
                    <h1>Salesforce to Sage 50 Integration</h1>
                    <p>This tutorial details the basic principles when dealing with an integration between <strong>Salesforce</strong> and <strong>Sage 50</strong>. This workflow will perform three basic tasks, which is the downloading opportunities from Salesforce to Sage, upload customers from Sage to Salesforce and upload products from Sage to Salesforce. We make the assumption that the product codes of the products match in both systems. The integration is not designed to handle products with options. We also assume that a custom external ID field named <code class="highlighter-rouge">SageAccountReference__c</code> is available on the accounts in Salesforce, and will be used by the integration to store the Sage A/C reference that corresponds with each account in Salesforce.</p>

<p>You can download a copy of the workflow from <a href="https://github.com/zynksoftware/samples/tree/master/Integration%20Samples/Salesforce%20to%20Sage%2050">here</a>. Please bear in mind when using this workflow that Salesforce is a highly customisable system, and the workflow will almost certainly need to be adapted to your needs.</p>

<h2 id="download-opportunities---phase-1">Download Opportunities - Phase 1</h2>
<p>This part of the process will download new ‘Closed Won’ opportunities from Salesforce and import them in to Sage. If the import was successful, the status in Salesforce will be updated to ‘Order Confirmed’ to prevent the opportunities from downloading again. It will automatically create customer accounts in Sage if they do not already exist. The process consists of the following tasks:</p>

<ol>
  <li><a href="querying-records-in-salesforce">Querying Records in Salesforce</a> - This task will query Salesforce for all opportunities where the ‘StageName’ field is set to ‘Closed Won’. The results will be saved to the ‘salesforce_opportunities.xml’ file.</li>
  <li><a href="xslt-transform">XSLT Transform</a> - This task will transform the output file from the previous task to customers and orders in the Zynk XML format, ready to be imported into Sage. Refer to our <a href="http://api.zynk.com/zynk-xml-overview">API Documentation</a> for detailed XML schema information.</li>
  <li><a href="container-task">Container Task</a> - This container task wraps up the tasks related to automatically creating customer accounts into Sage. It is used for organisational purposes only, it doesn’t perform any functions of the integration.
    <ol>
      <li><a href="importing-customers-into-sage-50-uk">Importing Customers into Sage 50 UK</a> - This task takes the output file from the ‘Transform to Zynk Customer + Sales Order XML’ task and imports the customers contained within the file into Sage. The ‘Auto Generate References’ setting on this task controls how new A/C references are generated. The task will write out any failed or successful customer imports to separate success and fail files.</li>
      <li><a href="xml-repeater">XML Repeater</a> - This XML Repeater task will loop through each customer in the success file from the previous task, and run the following sub-tasks for each one. This process will upload the generated Sage A/C reference of each customer to Salesforce.
        <ol>
          <li><a href="razor-template">Razor Template</a> - This Razor template task writes out the Sage A/C reference of the customer in the Salesforce XML format, ready to upload to the corresponding account in Salesforce. The Sage A/C reference of the customer is accessed using the context variables from the XML Repeater task.</li>
          <li><a href="updating-records-in-salesforce">Updating Records in Salesforce</a> - This task will upload the output file from the previous task to Salesforce. This will update the Sage A/C reference stored on the account in Salesforce. The ID of the Salesforce account to update is accessed using the context variables from the XML Repeater task.</li>
        </ol>
      </li>
    </ol>
  </li>
  <li><a href="container-task">Container Task</a> - This container task wraps up the tasks related to importing orders into Sage. It is used for organisational purposes only, it doesn’t perform any functions of the integration.
    <ol>
      <li><a href="importing-sales-orders-into-sage-50-uk">Importing Sales Orders into Sage 50 UK</a> - This task takes the output file from the ‘Transform to Zynk Customer + Sales Order XML’ task and imports the orders contained within the file into Sage. The task will write out any failed or successful order imports to separate success and fail files.</li>
      <li><a href="xml-repeater">XML Repeater</a> - This XML Repeater task will loop through each order in the success file from the previous task, and run the following sub-tasks for each one. This process will update the status of the corresponding opportunities in Salesforce.
        <ol>
          <li><a href="razor-template">Razor Template</a> - This Razor template task writes out the new status of the order in the Salesforce XML format, ready to upload to the corresponding account in Salesforce.</li>
          <li><a href="updating-records-in-salesforce">Updating Records in Salesforce</a> - This task will upload the output file from the previous task to Salesforce. This will update the status of the opportunity in Salesforce. The ID of the Salesforce opportunity to update is accessed using the context variables from the XML Repeater task.</li>
        </ol>
      </li>
    </ol>
  </li>
</ol>

<h2 id="upload-customers-to-salesforce---phase-2">Upload Customers to Salesforce - Phase 2</h2>
<p>This part of the process will export any modified customers from Sage 50, and update the corresponding account in Salesforce.  The process consists of the following tasks:</p>

<ol>
  <li><a href="exporting-customers-from-sage-50-uk">Exporting Customers from Sage 50 UK</a> - This task will export modified customer information from Sage 50 in Zynk XML format.</li>
  <li><a href="importing-records-to-salesforce-(bulk)">Importing Records to Salesforce (Bulk)</a> - This task will upload the customers information contained in the output file from the previous task to the accounts module in Salesforce. The accounts are matched based on the A/C field in Sage (i.e. the AccountReference in the XML file) and the SageAccountReference__c field in Salesforce.</li>
</ol>

<h2 id="upload-products-to-salesforce---phase-3">Upload Products to Salesforce - Phase 3</h2>
<p>This part of the process will export any modified products from Sage 50, and update the corresponding product in Salesforce. The process consists of the following tasks:</p>

<ol>
  <li><a href="exporting-stock-records-from-sage-50-uk">Exporting Stock Records from Sage 50 UK</a> - This task will export modified product information from Sage 50 in Zynk XML format.</li>
  <li><a href="importing-records-to-salesforce-(bulk)">Importing Records to Salesforce (Bulk)</a> - This task will upload the product information contained in the output file from the previous task to the Product2 module in Salesforce. The products are matched based on the product code field in Sage (i.e. the Sku in the XML file) and the ProductCode field in Salesforce.</li>
</ol>

<h2 id="archive---phase-4">Archive - Phase 4</h2>
<p>This is the final task in the process, and will archive off all data that was used by the workflow process. This allows for traceability and will assist when debugging the workflow.</p>

<ol>
  <li><a href="archive-workflow-data">Archive Workflow Data</a> - This task will archive off all data that was used by the workflow process.</li>
</ol>

<p>If you have any queries on any of the above, feel free to contact our support team via email at support@zynk.com or via telephone on 0191 303 7279.  Please note, as stated on the Auto Mapper task we do not support any changes to XSLT.</p>

                    <hr>
                    <div class="row">
                        <div class="col-sm-6"><a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a></div>
                        <div class="col-sm-6 text-right"><a href="http://github.com/workflow/docs/tree/master/_documentation/Integrations-Section/Salesforce-to-Sage-50-Integration.md"><span class="fa fa-github"></span>Edit on Github</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /#page-content-wrapper -->
</div>
<!-- /#wrapper -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>



<script>
    var screenWidth = $(window).width();

    // Add .active class to active link + scroll into view
    var pathinfo = location.pathname + location.hash;
    if (screenWidth > 768 && pathinfo != "/")
    {
        var scrollItem = $("#sidebar-wrapper").find("a[href='" + pathinfo + "']")
                .addClass('active')
                .parents().filter("div>ul>li")[0];
        if (scrollItem) {
            scrollItem.scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }
    }

    // Add external link icon next to external menu links
    $(".sidebar-nav a[href^=http]")
        .append('<i class="fa fa-external-link" style="margin-left:-15px"></i>');

    $("#menu-toggle").click(function(){
        $("#sidebar-wrapper").scrollTop(0);
        $(this).toggleClass("fa-angle-down");
        $("#wrapper").toggleClass("menu-collapsed");
    });

    if (screenWidth <= 768) {
        $("#menu-toggle").click();            
    }

    //Allow clicking on non-linked headers to jump to its #href
    $("h2,h3,h4").click(function(){
        if (this.id && this.innerHTML.indexOf("<a") == -1) {
            location.href = "#" + this.id;
        }
    });

    
    
    //should no longer be needed now that we're referencing server-side /slug permalinks
(function () {
    "use strict";
    String.prototype.replaceAll = function(search, replacement) {
        var target = this;
        return target.split(search).join(replacement);
    };

    function fixDoubleBracketLinks(cssSelector) {
        var sidebarText = $(cssSelector)[0].innerHTML;
        var matches = sidebarText.match(/\[\[(.+?)\]\]/g);
        var result = sidebarText;
        if(matches != null) {
            for(var i = 0; i < matches.length; i++) {
                var text = matches[i].replaceAll('[[','').replaceAll(']]','');
                result = result.replace(matches[i],
                    '<a href="' +
                    encodeURIComponent(text.replaceAll(' ','-').toLocaleLowerCase()) +
                    '">' + text + '</a>')
            }
            $(cssSelector).html(result);
        }
    }

    fixDoubleBracketLinks('#page-content-wrapper');
    fixDoubleBracketLinks('#sidebar-wrapper');
})();
    
</script>
    
    
    
</body>
</html>
