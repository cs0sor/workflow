<!DOCTYPE html>
<html lang="en">
<head>
    <title>Splitting XML Files</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,600,900" rel="stylesheet">
    <link rel="stylesheet" href="css/github.css">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/style.css">
 </head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="xcontainer">
        <div class="navbar-header">
            <a class="navbar-brand" title="Go to Zynk.com" href="http://zynk.com"><img class="img-responsive" id="logo-main" src="assets/logo.svg" alt="Click here to visit Zynk.com" /></a>
        </div>
        <div id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li class="topnav-2"><a href="mailto:support@zynk.com">support@zynk.com</a></li>
                </ul>
        </div>
    </div>
</nav>

<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper" class="sidebar-nav">
        
        <h1>Zynk Workflow Documentation</h1>
<ul>
  <li><a href="index">Home</a>
    <ul>
      <li>[[Getting Started]]</li>
      <li>[[Key Concepts]]</li>
      <li>[[Using Zynk]]</li>
      <li>[[Settings]]</li>
      <li>[[Extensions]]</li>
      <li>[[Integrations]]</li>
    </ul>
  </li>
  <li>[[Accounting]]
    <ul>
      <li>[[Sage 50 UK]]</li>
      <li>[[Sage 200]]</li>
      <li>[[Sage 200 Online]]</li>
      <li>[[Xero]]</li>
      <li>[[Kashflow]]</li>
      <li>[[Quickbooks Online]]</li>
      <li>[[Sage 50 US]]</li>
      <li>[[Brightpearl]]</li>
      <li>[[Sage One]]</li>
      <li>[[Sage 50 Payroll]]</li>
      <li>[[Sage 50 UK Reporting]]</li>
    </ul>
  </li>
  <li>[[CRM]]
    <ul>
      <li>[[ACT]]</li>
      <li>[[AutoTask]]</li>
      <li>[[BXP]]</li>
      <li>[[Campaign Monitor]]</li>
      <li>[[ConnectWise]]</li>
      <li>[[Salesforce]]</li>
      <li>[[Sugar CRM]]</li>
      <li>[[Zoho CRM]]</li>
    </ul>
  </li>
  <li>[[Databases]]
    <ul>
      <li>[[SQL Server]]</li>
      <li>[[SQLite]]</li>
      <li>[[ODBC]]</li>
      <li>[[OLEDB]]</li>
    </ul>
  </li>
  <li>[[Ecommerce]]
    <ul>
      <li>[[Amazon Marketplace]]</li>
      <li>[[Amazon Vendor Central]]</li>
      <li>[[BigCommerce]]</li>
      <li>[[Channel Advisor]]</li>
      <li>[[CoreCommerce]]</li>
      <li>[[Easy Webstore]]</li>
      <li>[[Ebay]]</li>
      <li>[[EKM Powershop]]</li>
      <li>[[Magento V1]]</li>
      <li>[[Magento V2]]</li>
      <li>[[PayPal]]</li>
      <li>[[Shopify]]</li>
      <li>[[WooCommerce]]</li>
    </ul>
  </li>
  <li>[[Files]]
    <ul>
      <li>[[CSV]]</li>
      <li>[[HTML]]</li>
      <li>[[Excel]]</li>
      <li>[[File]]</li>
      <li>[[File Helpers]]</li>
      <li>[[JSON]]</li>
      <li>[[PDF]]</li>
      <li>[[XML and XSLT]]</li>
    </ul>
  </li>
  <li>[[Cloud]]
    <ul>
      <li>[[Amazon S3]]</li>
    </ul>
  </li>
  <li>[[Social]]
    <ul>
      <li>[[LinkedIn]]</li>
      <li>[[Twitter]]</li>
      <li>[[Facebook]]</li>
    </ul>
  </li>
  <li>[[Web]]
    <ul>
      <li>[[Email]]</li>
      <li>[[FTP]]</li>
      <li>[[SFTP]]</li>
      <li>[[HTTP]]</li>
    </ul>
  </li>
  <li>[[Other]]
    <ul>
      <li>[[Developer]]</li>
      <li>[[SMS]]</li>
      <li>[[User Interface]]</li>
      <li>[[WordPress]]</li>
      <li>[[Zynk Core]]</li>
    </ul>
  </li>
  <li>[[Contact Us]]</li>
</ul>

    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 markdown-body">
                    <a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a>
                    <h1>Splitting XML Files</h1>
                    <p>The XML Split task will take a large XML file and split it into smaller XML files using a specific XPath Query and specifying the number of records to output, whilst maintaining the same XML document structure. This is generally used when the external system you are integrating with is unable to accept large sets of data.</p>

<p>The collection of output files produced by this task can be processed using the <a href="file-repeater">File Repeater</a> task.</p>

<h2 id="settings">Settings</h2>
<h3 id="input-file">Input File</h3>
<p><em>Required</em><br />
The XML file to be processed.</p>

<h3 id="output-folder">Output Folder</h3>
<p><em>Required</em><br />
The XML file to be processed.
The output folder for the split XML files. The output files are named using the format: <code class="highlighter-rouge">inputfile\_1.xml</code>, <code class="highlighter-rouge">inputfile\_2.xml</code>, where <code class="highlighter-rouge">inputfile</code> is the name of the input file.</p>

<h3 id="record-limit">Record Limit</h3>
<p><em>Required</em><br />
The maximum number of records each XML file should contain. Defaults to <code class="highlighter-rouge">1</code>. Only integer values greater than or equal to 1 will be accepted.</p>

<h3 id="xpath-query">XPath Query</h3>
<p><em>Required</em><br />
The XPath query that specifies each row of data that needs to be split e.g. <code class="highlighter-rouge">Company/Products/Product</code></p>

<h3 id="zynk-settings">Zynk Settings</h3>
<p>See <a href="common-task-settings">Common Task Settings</a></p>

<h2 id="examples">Examples</h2>
<p>A sample input file is shown below, containing two stock transactions to be split into separate files. To achieve this, the XPath Query setting should be set to <code class="highlighter-rouge">Company/StockTransactions/StockTransaction</code>, and the Record Limit should be set to <code class="highlighter-rouge">1</code>.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;Company</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;StockTransactions&gt;</span>
        <span class="nt">&lt;StockTransaction&gt;</span>
            <span class="nt">&lt;UniqueId&gt;</span>1<span class="nt">&lt;/UniqueId&gt;</span>
            <span class="nt">&lt;StockTransactionType&gt;</span>AdjustmentIn<span class="nt">&lt;/StockTransactionType&gt;</span>
            <span class="nt">&lt;StockCode&gt;</span>BOARD001<span class="nt">&lt;/StockCode&gt;</span>
            <span class="nt">&lt;StockTransactionDate&gt;</span>2006-12-31T00:00:00<span class="nt">&lt;/StockTransactionDate&gt;</span>
            <span class="nt">&lt;Reference&gt;</span>STK TAKE<span class="nt">&lt;/Reference&gt;</span>
            <span class="nt">&lt;Details&gt;</span>Whiteboard - Drywipe (900 x 1200)<span class="nt">&lt;/Details&gt;</span>
            <span class="nt">&lt;Qty&gt;</span>2<span class="nt">&lt;/Qty&gt;</span>
            <span class="nt">&lt;CostPrice&gt;</span>15<span class="nt">&lt;/CostPrice&gt;</span>
            <span class="nt">&lt;SalesPrice&gt;</span>0<span class="nt">&lt;/SalesPrice&gt;</span>
            <span class="nt">&lt;StockTransactionNumber&gt;</span>1<span class="nt">&lt;/StockTransactionNumber&gt;</span>
        <span class="nt">&lt;/StockTransaction&gt;</span>
        <span class="nt">&lt;StockTransaction&gt;</span>
            <span class="nt">&lt;UniqueId&gt;</span>2<span class="nt">&lt;/UniqueId&gt;</span>
            <span class="nt">&lt;StockTransactionType&gt;</span>AdjustmentIn<span class="nt">&lt;/StockTransactionType&gt;</span>
            <span class="nt">&lt;StockCode&gt;</span>BOARD002<span class="nt">&lt;/StockCode&gt;</span>
            <span class="nt">&lt;StockTransactionDate&gt;</span>2006-12-31T00:00:00<span class="nt">&lt;/StockTransactionDate&gt;</span>
            <span class="nt">&lt;Reference&gt;</span>STK TAKE<span class="nt">&lt;/Reference&gt;</span>
            <span class="nt">&lt;Details&gt;</span>Whiteboard - Drywipe (1000 x 1500)<span class="nt">&lt;/Details&gt;</span>
            <span class="nt">&lt;Qty&gt;</span>2<span class="nt">&lt;/Qty&gt;</span>
            <span class="nt">&lt;CostPrice&gt;</span>17<span class="nt">&lt;/CostPrice&gt;</span>
            <span class="nt">&lt;SalesPrice&gt;</span>0<span class="nt">&lt;/SalesPrice&gt;</span>
            <span class="nt">&lt;StockTransactionNumber&gt;</span>2<span class="nt">&lt;/StockTransactionNumber&gt;</span>
        <span class="nt">&lt;/StockTransaction&gt;</span>
    <span class="nt">&lt;/StockTransactions&gt;</span>
<span class="nt">&lt;/Company&gt;</span>
</code></pre>
</div>

<p>Two output files will be created, as shown below, each including a single stock transaction:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;Company</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;StockTransactions&gt;</span>
        <span class="nt">&lt;StockTransaction&gt;</span>
            <span class="nt">&lt;UniqueId&gt;</span>1<span class="nt">&lt;/UniqueId&gt;</span>
            <span class="nt">&lt;StockTransactionType&gt;</span>AdjustmentIn<span class="nt">&lt;/StockTransactionType&gt;</span>
            <span class="nt">&lt;StockCode&gt;</span>BOARD001<span class="nt">&lt;/StockCode&gt;</span>
            <span class="nt">&lt;StockTransactionDate&gt;</span>2006-12-31T00:00:00<span class="nt">&lt;/StockTransactionDate&gt;</span>
            <span class="nt">&lt;Reference&gt;</span>STK TAKE<span class="nt">&lt;/Reference&gt;</span>
            <span class="nt">&lt;Details&gt;</span>Whiteboard - Drywipe (900 x 1200)<span class="nt">&lt;/Details&gt;</span>
            <span class="nt">&lt;Qty&gt;</span>2<span class="nt">&lt;/Qty&gt;</span>
            <span class="nt">&lt;CostPrice&gt;</span>15<span class="nt">&lt;/CostPrice&gt;</span>
            <span class="nt">&lt;SalesPrice&gt;</span>0<span class="nt">&lt;/SalesPrice&gt;</span>
            <span class="nt">&lt;StockTransactionNumber&gt;</span>1<span class="nt">&lt;/StockTransactionNumber&gt;</span>
        <span class="nt">&lt;/StockTransaction&gt;</span>
    <span class="nt">&lt;/StockTransactions&gt;</span>
<span class="nt">&lt;/Company&gt;</span>
</code></pre>
</div>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;Company</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;StockTransactions&gt;</span>
        <span class="nt">&lt;StockTransaction&gt;</span>
            <span class="nt">&lt;UniqueId&gt;</span>2<span class="nt">&lt;/UniqueId&gt;</span>
            <span class="nt">&lt;StockTransactionType&gt;</span>AdjustmentIn<span class="nt">&lt;/StockTransactionType&gt;</span>
            <span class="nt">&lt;StockCode&gt;</span>BOARD002<span class="nt">&lt;/StockCode&gt;</span>
            <span class="nt">&lt;StockTransactionDate&gt;</span>2006-12-31T00:00:00<span class="nt">&lt;/StockTransactionDate&gt;</span>
            <span class="nt">&lt;Reference&gt;</span>STK TAKE<span class="nt">&lt;/Reference&gt;</span>
            <span class="nt">&lt;Details&gt;</span>Whiteboard - Drywipe (1000 x 1500)<span class="nt">&lt;/Details&gt;</span>
            <span class="nt">&lt;Qty&gt;</span>2<span class="nt">&lt;/Qty&gt;</span>
            <span class="nt">&lt;CostPrice&gt;</span>17<span class="nt">&lt;/CostPrice&gt;</span>
            <span class="nt">&lt;SalesPrice&gt;</span>0<span class="nt">&lt;/SalesPrice&gt;</span>
            <span class="nt">&lt;StockTransactionNumber&gt;</span>2<span class="nt">&lt;/StockTransactionNumber&gt;</span>
        <span class="nt">&lt;/StockTransaction&gt;</span>
    <span class="nt">&lt;/StockTransactions&gt;</span>
<span class="nt">&lt;/Company&gt;</span>
</code></pre>
</div>

                    <hr>
                    <div class="row">
                        <div class="col-sm-6"><a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a></div>
                        <div class="col-sm-6 text-right"><a href="http://github.com/workflow/docs/tree/master/_documentation/XML-and-XSLT-Connector/Splitting-XML-Files.md"><span class="fa fa-github"></span>Edit on Github</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /#page-content-wrapper -->
</div>
<!-- /#wrapper -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>



<script>
    var screenWidth = $(window).width();

    // Add .active class to active link + scroll into view
    var pathinfo = location.pathname + location.hash;
    if (screenWidth > 768 && pathinfo != "/")
    {
        var scrollItem = $("#sidebar-wrapper").find("a[href='" + pathinfo + "']")
                .addClass('active')
                .parents().filter("div>ul>li")[0];
        if (scrollItem) {
            scrollItem.scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }
    }

    // Add external link icon next to external menu links
    $(".sidebar-nav a[href^=http]")
        .append('<i class="fa fa-external-link" style="margin-left:-15px"></i>');

    $("#menu-toggle").click(function(){
        $("#sidebar-wrapper").scrollTop(0);
        $(this).toggleClass("fa-angle-down");
        $("#wrapper").toggleClass("menu-collapsed");
    });

    if (screenWidth <= 768) {
        $("#menu-toggle").click();            
    }

    //Allow clicking on non-linked headers to jump to its #href
    $("h2,h3,h4").click(function(){
        if (this.id && this.innerHTML.indexOf("<a") == -1) {
            location.href = "#" + this.id;
        }
    });

    
    
    //should no longer be needed now that we're referencing server-side /slug permalinks
(function () {
    "use strict";
    String.prototype.replaceAll = function(search, replacement) {
        var target = this;
        return target.split(search).join(replacement);
    };

    function fixDoubleBracketLinks(cssSelector) {
        var sidebarText = $(cssSelector)[0].innerHTML;
        var matches = sidebarText.match(/\[\[(.+?)\]\]/g);
        var result = sidebarText;
        if(matches != null) {
            for(var i = 0; i < matches.length; i++) {
                var text = matches[i].replaceAll('[[','').replaceAll(']]','');
                result = result.replace(matches[i],
                    '<a href="' +
                    encodeURIComponent(text.replaceAll(' ','-').toLocaleLowerCase()) +
                    '">' + text + '</a>')
            }
            $(cssSelector).html(result);
        }
    }

    fixDoubleBracketLinks('#page-content-wrapper');
    fixDoubleBracketLinks('#sidebar-wrapper');
})();
    
</script>
    
    
    
</body>
</html>
