<!DOCTYPE html>
<html lang="en">
<head>
    <title>Querying Records in SugarCRM</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,600,900" rel="stylesheet">
    <link rel="stylesheet" href="css/github.css">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/style.css">
 </head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="xcontainer">
        <div class="navbar-header">
            <a class="navbar-brand" title="Go to Zynk.com" href="http://zynk.com"><img class="img-responsive" id="logo-main" src="assets/logo.svg" alt="Click here to visit Zynk.com" /></a>
        </div>
        <div id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li class="topnav-2"><a href="mailto:support@zynk.com">support@zynk.com</a></li>
                </ul>
        </div>
    </div>
</nav>

<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper" class="sidebar-nav">
        
        <h1>Zynk Workflow Documentation</h1>
<ul>
  <li><a href="index">Home</a></li>
  <li>[[Introduction]]
    <ul>
      <li>[[Welcome]]</li>
      <li>[[Getting Started]]</li>
      <li>[[Key Concepts]]</li>
      <li>[[Using Zynk]]</li>
      <li>[[Settings]]</li>
      <li>[[Extensions]]</li>
      <li>[[Integrations]]</li>
    </ul>
  </li>
  <li>[[Accounting]]
    <ul>
      <li>[[Sage 50 UK]]</li>
      <li>[[Sage 200]]</li>
      <li>[[Sage 200 Online]]</li>
      <li>[[Xero]]</li>
      <li>[[Kashflow]]</li>
      <li>[[Quickbooks Online]]</li>
      <li>[[Sage 50 US]]</li>
      <li>[[Brightpearl]]</li>
      <li>[[Sage One]]</li>
      <li>[[Sage 50 Payroll]]</li>
      <li>[[Sage 50 UK Reporting]]</li>
    </ul>
  </li>
  <li>[[CRM]]
    <ul>
      <li>[[ACT]]</li>
      <li>[[AutoTask]]</li>
      <li>[[BXP]]</li>
      <li>[[Campaign Monitor]]</li>
      <li>[[ConnectWise]]</li>
      <li>[[Salesforce]]</li>
      <li>[[Sugar CRM]]</li>
      <li>[[Zoho CRM]]</li>
    </ul>
  </li>
  <li>[[Databases]]
    <ul>
      <li>[[SQL Server]]</li>
      <li>[[SQLite]]</li>
      <li>[[ODBC]]</li>
      <li>[[OLEDB]]</li>
    </ul>
  </li>
  <li>[[Ecommerce]]
    <ul>
      <li>[[Amazon Marketplace]]</li>
      <li>[[Amazon Vendor Central]]</li>
      <li>[[BigCommerce]]</li>
      <li>[[Channel Advisor]]</li>
      <li>[[CoreCommerce]]</li>
      <li>[[Easy Webstore]]</li>
      <li>[[Ebay]]</li>
      <li>[[EKM Powershop]]</li>
      <li>[[Magento V1]]</li>
      <li>[[Magento V2]]</li>
      <li>[[PayPal]]</li>
      <li>[[Shopify]]</li>
      <li>[[WooCommerce]]</li>
    </ul>
  </li>
  <li>[[Files]]
    <ul>
      <li>[[CSV]]</li>
      <li>[[HTML]]</li>
      <li>[[Excel]]</li>
      <li>[[File]]</li>
      <li>[[File Helpers]]</li>
      <li>[[JSON]]</li>
      <li>[[PDF]]</li>
      <li>[[XML and XSLT]]</li>
    </ul>
  </li>
  <li>[[Cloud]]
    <ul>
      <li>[[Amazon S3]]</li>
    </ul>
  </li>
  <li>[[Social]]
    <ul>
      <li>[[LinkedIn]]</li>
      <li>[[Twitter]]</li>
      <li>[[Facebook]]</li>
    </ul>
  </li>
  <li>[[Web]]
    <ul>
      <li>[[Email]]</li>
      <li>[[FTP]]</li>
      <li>[[SFTP]]</li>
      <li>[[HTTP]]</li>
    </ul>
  </li>
  <li>[[Other]]
    <ul>
      <li>[[Developer]]</li>
      <li>[[SMS]]</li>
      <li>[[User Interface]]</li>
      <li>[[WordPress]]</li>
      <li>[[Zynk Core]]</li>
    </ul>
  </li>
  <li>[[Contact Us]]</li>
</ul>

    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 markdown-body">
                    <a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a>
                    <h1>Querying Records in SugarCRM</h1>
                    <p>This task will execute a â€œreadâ€ query against the SugarCRM system and return the data in XML format. Nested queries, custom modules and custom fields are all supported.</p>

<p>Depending on the amount of data returned from the query this task will download in pages, each returning a maximum of 200 records.  The output file will contain all data downloaded from all pages.</p>

<h2 id="settings">Settings</h2>

<h3 id="connection">Connection</h3>
<p><em>Required</em><br />
The SugarCRM Connection to use for querying records. See <a href="connecting-to-sugarcrm">Connecting to SugarCRM</a>.</p>

<h3 id="maximum-records">Maximum Records</h3>
<p><em>Required</em><br />
Use this property to specify a maximum number of records to be returned in a Query. Setting this to -1 will return all records</p>

<h3 id="output-file">Output File</h3>
<p><em>Required</em><br />
The file to saved queried records to.</p>

<h3 id="query---criteria">Query -&gt; Criteria</h3>
<p><em>Optional</em><br />
Enter any special criteria for limiting the results returned e.g. <code class="highlighter-rouge">accounts.name LIKE "A%"</code>. Note that you must provide the module name, unless the field is a custom field created in Studio.</p>

<h3 id="query---fields">Query -&gt; Fields</h3>
<p><em>Required</em><br />
Configure the module name and list of the fields you want the query to return.</p>

<h3 id="query---include-deleted-records">Query -&gt; Include Deleted Records</h3>
<p><em>Required</em><br />
Set to True if you want the results to include deleted records.</p>

<h3 id="query---order">Query -&gt; Order</h3>
<p><em>Optional</em><br />
Use this to specify the order in which you require the results to be returned e.g. 	<code class="highlighter-rouge">accounts.name ASC</code> would sort the data by name in ascending alphabetical order. Note that you must provide the module name, unless the field is a custom field created in Studio.</p>

<h3 id="query---sub-queries">Query -&gt; Sub Queries</h3>
<p><em>Optional</em><br />
A list of further queries used to read data from related modules in SugarCRM. For example, when querying the opportunities module, you could use a sub query to get the account associated with each opportunity, and another to get the items.</p>

<h3 id="query---xml-root-name">Query -&gt; XML Root Name</h3>
<p><em>Required</em><br />
Name to use for the XML root e.g. Customers.</p>

<h3 id="query---xml-row-name">Query -&gt; XML Row Name</h3>
<p><em>Required</em><br />
Name to use for the XML row name e.g. Customer.</p>

<h3 id="record-offset">Record Offset</h3>
<p><em>Required</em><br />
Offset to start the query if you are returning “pages” of records. Setting this to 0 will return records starting from the first result.</p>

<h3 id="zynk-settings">Zynk Settings</h3>
<p>See <a href="common-task-settings">Common Task Settings</a></p>

<h2 id="field-settings">Field Settings</h2>

<p>Field settings are used to specify a SugarCRM module to query, and the list of fields to return. You will see a window like the one below when editing the Fields setting.</p>

<p><a href="http://www.zynk.com/images/v2/sugar_crm/field_list.png"><img src="http://www.zynk.com/images/v2/sugar_crm/field_list.png" alt="Field Settings" /></a></p>

<table>
  <thead>
    <tr>
      <th>Setting</th>
      <th>Required</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Module Name</td>
      <td>Required</td>
      <td>Select the name of the module to query from the drop down. If you are querying a custom module, it will not be listed in the drop down, so you will need to type it in. You can find a list of modules in your SugarCRM system under Admin &gt; Studio. Please note that the module name is case sensitive.</td>
    </tr>
    <tr>
      <td>Link Field</td>
      <td>Dependant</td>
      <td>This setting will only be displayed when editing the fields for a sub-query. This setting determines which field will be used to link (i.e. relate) records from this module to the parent query’s module. We’ve provided a list of some of the commonly used 	<a href="326-sugarcrm-link-fields">Link Fields</a>, please refer to the Sugar CRM documentation or contact your Sugar CRM provider for a complete list of the link field names available on each module.</td>
    </tr>
    <tr>
      <td>Fields</td>
      <td>Required</td>
      <td>Enter the list of fields that should be returned by the query. Note that the field names are case sensitive. You can find the list of available field names for a module under Admin &gt; Studio &gt; [	<em>Module Name</em>] &gt; Fields. You can use the ‘Add Standard Fields’ button to add all standard fields to the list. Please note that this will only work if you have selected a standard module from the ‘Module Name’ drop down box. You can remove selected fields from the list using the ‘Delete’ key, or click the ‘Clear Fields’ button to clear the list completely.</td>
    </tr>
  </tbody>
</table>

<h2 id="examples">Examples</h2>

<p>You can find an example of how to use this task in the <a href="468-sugar-crm-to-sage-50-integration">Sugar CRM to Sage 50 Integration</a> article.</p>

<p>Sample output file, when selecting the id and name fields from the Accounts module, with the XML Root Name set to ‘Rows’ and the XML Row Name set to ‘Row’:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" standalone="yes"?&gt;</span>
<span class="nt">&lt;Rows&gt;</span>
  <span class="nt">&lt;Row</span> <span class="na">id=</span><span class="s">"371d9b28-b7ab-8f28-f098-51a481e42e0d"</span> <span class="na">Name=</span><span class="s">"DataMining Ltd"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Row</span> <span class="na">id=</span><span class="s">"4662fe3e-5457-054a-0195-51a481411e49"</span> <span class="na">Name=</span><span class="s">"Nelson Inc"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Row</span> <span class="na">id=</span><span class="s">"52828444-a7fc-4ecc-72f8-51a48143b6ed"</span> <span class="na">Name=</span><span class="s">"Internetware Ltd"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Rows&gt;</span>
</code></pre>
</div>

<p>Sample output file, when selecting the id, name and amount fields from the Opportunities module with the XML Root Name set to ‘Opportunities’ and XML Row Name set to ‘Opportunity’, and a sub-query selecting the name, billing_address_street and billing_address_city fields from the Accounts module with the XML Root Name set to ‘Accounts’ and the XML Row Name set to ‘Account’:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;Opportunities&gt;</span>
  <span class="nt">&lt;Opportunity</span> <span class="na">id=</span><span class="s">"168ae1cb-15b1-1fca-1959-51a481ab8a6a"</span> <span class="na">name=</span><span class="s">"AB Drivers Limited - 1000 units"</span> <span class="na">amount=</span><span class="s">"25,000.00"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;Accounts&gt;</span>
	  <span class="nt">&lt;Account</span> <span class="na">name=</span><span class="s">"AB Drivers Limited"</span> <span class="na">billing_address_street=</span><span class="s">"345 Sugar Blvd."</span> <span class="na">billing_address_city=</span><span class="s">"Ohio"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/Accounts&gt;</span>
  <span class="nt">&lt;/Opportunity&gt;</span>
  <span class="nt">&lt;Opportunity</span> <span class="na">id=</span><span class="s">"23ac1d05-f5f8-3078-729f-51a4812b13e5"</span> <span class="na">name=</span><span class="s">"Ink Conglomerate Inc - 1000 units"</span> <span class="na">amount=</span><span class="s">"10,000.00"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;Accounts&gt;</span>
	  <span class="nt">&lt;Account</span> <span class="na">name=</span><span class="s">"Ink Conglomerate Inc"</span> <span class="na">billing_address_street=</span><span class="s">"1715 Scott Dr"</span> <span class="na">billing_address_city=</span><span class="s">"San Francisco"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;/Accounts&gt;</span>
  <span class="nt">&lt;/Opportunity&gt;</span>
<span class="nt">&lt;/Opportunities&gt;</span>
</code></pre>
</div>

                    <hr>
                    <div class="row">
                        <div class="col-sm-6"><a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a></div>
                        <div class="col-sm-6 text-right"><a href="http://github.com/Zynk-workflow/docs/tree/master/_documentation/Sugar-CRM-Connector/Querying-Records-in-SugarCRM.md"><span class="fa fa-github"></span>Edit on Github</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /#page-content-wrapper -->
</div>
<!-- /#wrapper -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>



<script>
    var screenWidth = $(window).width();

    // Add .active class to active link + scroll into view
    var pathinfo = location.pathname + location.hash;
    if (screenWidth > 768 && pathinfo != "/")
    {
        var scrollItem = $("#sidebar-wrapper").find("a[href='" + pathinfo + "']")
                .addClass('active')
                .parents().filter("div>ul>li")[0];
        if (scrollItem) {
            scrollItem.scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }
    }

    // Add external link icon next to external menu links
    $(".sidebar-nav a[href^=http]")
        .append('<i class="fa fa-external-link" style="margin-left:-15px"></i>');

    $("#menu-toggle").click(function(){
        $("#sidebar-wrapper").scrollTop(0);
        $(this).toggleClass("fa-angle-down");
        $("#wrapper").toggleClass("menu-collapsed");
    });

    if (screenWidth <= 768) {
        $("#menu-toggle").click();            
    }

    //Allow clicking on non-linked headers to jump to its #href
    $("h2,h3,h4").click(function(){
        if (this.id && this.innerHTML.indexOf("<a") == -1) {
            location.href = "#" + this.id;
        }
    });

    
    
    //should no longer be needed now that we're referencing server-side /slug permalinks
(function () {
    "use strict";
    String.prototype.replaceAll = function(search, replacement) {
        var target = this;
        return target.split(search).join(replacement);
    };

    function fixDoubleBracketLinks(cssSelector) {
        var sidebarText = $(cssSelector)[0].innerHTML;
        var matches = sidebarText.match(/\[\[(.+?)\]\]/g);
        var result = sidebarText;
        if(matches != null) {
            for(var i = 0; i < matches.length; i++) {
                var text = matches[i].replaceAll('[[','').replaceAll(']]','');
                result = result.replace(matches[i],
                    '<a href="' +
                    encodeURIComponent(text.replaceAll(' ','-').toLocaleLowerCase()) +
                    '">' + text + '</a>')
            }
            $(cssSelector).html(result);
        }
    }

    fixDoubleBracketLinks('#page-content-wrapper');
    fixDoubleBracketLinks('#sidebar-wrapper');
})();
    
</script>
    
    
    
</body>
</html>
