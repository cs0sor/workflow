<!DOCTYPE html>
<html lang="en">
<head>
    <title>Inserting Records to SugarCRM</title>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,600,900" rel="stylesheet">
    <link rel="stylesheet" href="css/github.css">
    <link rel="stylesheet" href="css/nav.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/style.css">
 </head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="xcontainer">
        <div class="navbar-header">
            <a class="navbar-brand" title="Go to Zynk.com" href="http://zynk.com"><img class="img-responsive" id="logo-main" src="assets/logo.svg" alt="Click here to visit Zynk.com" /></a>
        </div>
        <div id="myNavbar">
                <ul class="nav navbar-nav navbar-right">
                    <li class="topnav-2"><a href="mailto:support@zynk.com">support@zynk.com</a></li>
                </ul>
        </div>
    </div>
</nav>

<div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper" class="sidebar-nav">
        
        <h1>Zynk Workflow Documentation</h1>
<ul>
  <li><a href="index">Home</a></li>
  <li>[[Introduction]]
    <ul>
      <li>[[Welcome]]</li>
      <li>[[Getting Started]]</li>
      <li>[[Key Concepts]]</li>
      <li>[[Using Zynk]]</li>
      <li>[[Settings]]</li>
      <li>[[Extensions]]</li>
      <li>[[Integrations]]</li>
    </ul>
  </li>
  <li>[[Accounting]]
    <ul>
      <li>[[Sage 50 UK]]</li>
      <li>[[Sage 200]]</li>
      <li>[[Sage 200 Online]]</li>
      <li>[[Xero]]</li>
      <li>[[Kashflow]]</li>
      <li>[[Quickbooks Online]]</li>
      <li>[[Sage 50 US]]</li>
      <li>[[Brightpearl]]</li>
      <li>[[Sage One]]</li>
      <li>[[Sage 50 Payroll]]</li>
      <li>[[Sage 50 UK Reporting]]</li>
    </ul>
  </li>
  <li>[[CRM]]
    <ul>
      <li>[[ACT]]</li>
      <li>[[AutoTask]]</li>
      <li>[[BXP]]</li>
      <li>[[Campaign Monitor]]</li>
      <li>[[ConnectWise]]</li>
      <li>[[Salesforce]]</li>
      <li>[[Sugar CRM]]</li>
      <li>[[Zoho CRM]]</li>
    </ul>
  </li>
  <li>[[Databases]]
    <ul>
      <li>[[SQL Server]]</li>
      <li>[[SQLite]]</li>
      <li>[[ODBC]]</li>
      <li>[[OLEDB]]</li>
    </ul>
  </li>
  <li>[[Ecommerce]]
    <ul>
      <li>[[Amazon Marketplace]]</li>
      <li>[[Amazon Vendor Central]]</li>
      <li>[[BigCommerce]]</li>
      <li>[[Channel Advisor]]</li>
      <li>[[CoreCommerce]]</li>
      <li>[[Easy Webstore]]</li>
      <li>[[Ebay]]</li>
      <li>[[EKM Powershop]]</li>
      <li>[[Magento V1]]</li>
      <li>[[Magento V2]]</li>
      <li>[[PayPal]]</li>
      <li>[[Shopify]]</li>
      <li>[[WooCommerce]]</li>
    </ul>
  </li>
  <li>[[Files]]
    <ul>
      <li>[[CSV]]</li>
      <li>[[HTML]]</li>
      <li>[[Excel]]</li>
      <li>[[File]]</li>
      <li>[[File Helpers]]</li>
      <li>[[JSON]]</li>
      <li>[[PDF]]</li>
      <li>[[XML and XSLT]]</li>
    </ul>
  </li>
  <li>[[Cloud]]
    <ul>
      <li>[[Amazon S3]]</li>
    </ul>
  </li>
  <li>[[Social]]
    <ul>
      <li>[[LinkedIn]]</li>
      <li>[[Twitter]]</li>
      <li>[[Facebook]]</li>
    </ul>
  </li>
  <li>[[Web]]
    <ul>
      <li>[[Email]]</li>
      <li>[[FTP]]</li>
      <li>[[SFTP]]</li>
      <li>[[HTTP]]</li>
    </ul>
  </li>
  <li>[[Other]]
    <ul>
      <li>[[Developer]]</li>
      <li>[[SMS]]</li>
      <li>[[User Interface]]</li>
      <li>[[WordPress]]</li>
      <li>[[Zynk Core]]</li>
    </ul>
  </li>
  <li>[[Contact Us]]</li>
</ul>

    </div>
    <!-- /#sidebar-wrapper -->

    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 markdown-body">
                    <a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a>
                    <h1>Inserting Records to SugarCRM</h1>
                    <p>This task will insert a new record or update an existing record in Sugar CRM. An update is performed if the record ID was provided in the input file, or an existing record is found in Sugar where the value of the key field matches the value specified in the input file. If no matching record is found, a new record will be created in Sugar.</p>

<p>The task supports setting relationships to existing records in Sugar, using the <a href="326-sugarcrm-link-fields">link field</a> name. The record to link to must already exist in Sugar, the task will not create it if it does not exist. Any field can be used to look up the related record in Sugar, such as the ID or Name, and the task will use the first matching record found.</p>

<h2 id="settings">Settings</h2>

<h3 id="connection">Connection</h3>
<p><em>Required</em><br />
The SugarCRM Connection to use for querying records. See <a href="connecting-to-sugarcrm">Connecting to SugarCRM</a>.</p>

<h3 id="fail-file">Fail File</h3>
<p><em>Required</em><br />
The file to save failed records to.</p>

<h3 id="input-file">Input File</h3>
<p><em>Required</em><br />
The file containing records you’d like to import.</p>

<h3 id="success-file">Success File</h3>
<p><em>Required</em><br />
The file to save successful records to.</p>

<h3 id="key-fields">Key Field(s)</h3>
<p><em>Required</em><br />
The field(s) to use when looking for a matching existing record in Sugar. Defaults to the ID field if not specified.</p>

<h3 id="module-name">Module Name</h3>
<p><em>Required</em><br />
The name of the module to insert records to e.g. Opportunity. Note that the module name is case sensitive.</p>

<h3 id="operation-type">Operation Type</h3>
<p><em>Required</em><br />
Select the type of operation to perform against Sugar. The available options are:</p>

<ul>
  <li>Upsert - The task will update records if they already exist, or create them if they do not.</li>
  <li>Insert - The task will only create new records. If an existing record is provided in the input file, it won’t be updated in Sugar.</li>
  <li>Update - The task will only update existing records. If a new record is provided in the input file, it won’t be created in Sugar.</li>
</ul>

<h3 id="xpath">XPath</h3>
<p><em>Required</em>
Specify the XPath query to use to obtain the records from the input file. This property defaults to Rows/Row but allows you to specify another XPath query for the records.</p>

<h2 id="zynk-settings">Zynk Settings</h2>
<p>See <a href="common-task-settings">Common Task Settings</a></p>

<h2 id="examples">Examples</h2>

<p>You can find an example of how to use this task in the <a href="468-sugar-crm-to-sage-50-integration">Sugar CRM to Sage 50 Integration</a> article.</p>

<p>The sample input file shown below will create a new account called “Zynk Software Ltd”, and update the existing account with ID 52828444-a7fc-4ecc-72f8-51a48143b6ed. Note that the XPath Query setting would need to be set to  <code class="highlighter-rouge">Rows/Row</code> to access the records contained in this file.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;Rows&gt;</span>
  <span class="nt">&lt;Row</span> <span class="na">name=</span><span class="s">"Zynk Software Ltd"</span> <span class="na">phone_office=</span><span class="s">"123456789"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Row</span> <span class="na">id=</span><span class="s">"52828444-a7fc-4ecc-72f8-51a48143b6ed"</span> <span class="na">name=</span><span class="s">"Internetware Ltd"</span> <span class="na">phone_office=</span><span class="s">"123456789"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Rows&gt;</span>
</code></pre>
</div>

<p>A sample success file is shown below, containing the ID of the newly created account.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;Rows&gt;</span>
  <span class="nt">&lt;Row</span> <span class="na">id=</span><span class="s">"cbef463d-13ed-4a25-ae54-828985fa37a2"</span> <span class="na">name=</span><span class="s">"Zynk Software Ltd"</span> <span class="na">phone_office=</span><span class="s">"123456789"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;Row</span> <span class="na">id=</span><span class="s">"52828444-a7fc-4ecc-72f8-51a48143b6ed"</span> <span class="na">name=</span><span class="s">"Internetware Ltd"</span> <span class="na">phone_office=</span><span class="s">"123456789"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/Rows&gt;</span>
</code></pre>
</div>

<p>The sample input file shown below shows the creation of an opportunity with a related account. In this case the <a href="326-sugarcrm-link-fields">link field</a> “accounts” is set to the account with ID 5f87cba4-a90e-3b2a-57ab-5305f2776fea. Note that the XPath Query setting would need to be set to <code class="highlighter-rouge">Opportunities/Opportunity</code> to access the records contained in this file.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;Opportunities&gt;</span>
  <span class="nt">&lt;Opportunity</span> <span class="na">name=</span><span class="s">"Zynk Software"</span> <span class="na">date_closed=</span><span class="s">"2014-09-25"</span> <span class="na">sales_stage=</span><span class="s">"Closed Won"</span> <span class="na">amount=</span><span class="s">"175"</span> <span class="na">description=</span><span class="s">"New printer"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;accounts&gt;</span>
	  <span class="nt">&lt;id&gt;</span>5f87cba4-a90e-3b2a-57ab-5305f2776fea<span class="nt">&lt;/id&gt;</span>
	<span class="nt">&lt;/accounts&gt;</span>
  <span class="nt">&lt;/Opportunity&gt;</span>
<span class="nt">&lt;/Opportunities&gt;</span>
</code></pre>
</div>

                    <hr>
                    <div class="row">
                        <div class="col-sm-6"><a onclick="history.go(-1)" href="#"><span class="fa fa-arrow-left"></span>Back</a></div>
                        <div class="col-sm-6 text-right"><a href="http://github.com/Zynk-workflow/docs/tree/master/_documentation/Sugar-CRM-Connector/Inserting-Records-to-SugarCRM.md"><span class="fa fa-github"></span>Edit on Github</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /#page-content-wrapper -->
</div>
<!-- /#wrapper -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/js/bootstrap.min.js"></script>



<script>
    var screenWidth = $(window).width();

    // Add .active class to active link + scroll into view
    var pathinfo = location.pathname + location.hash;
    if (screenWidth > 768 && pathinfo != "/")
    {
        var scrollItem = $("#sidebar-wrapper").find("a[href='" + pathinfo + "']")
                .addClass('active')
                .parents().filter("div>ul>li")[0];
        if (scrollItem) {
            scrollItem.scrollIntoView({
                behavior: "smooth",
                block: "start"
            });
        }
    }

    // Add external link icon next to external menu links
    $(".sidebar-nav a[href^=http]")
        .append('<i class="fa fa-external-link" style="margin-left:-15px"></i>');

    $("#menu-toggle").click(function(){
        $("#sidebar-wrapper").scrollTop(0);
        $(this).toggleClass("fa-angle-down");
        $("#wrapper").toggleClass("menu-collapsed");
    });

    if (screenWidth <= 768) {
        $("#menu-toggle").click();            
    }

    //Allow clicking on non-linked headers to jump to its #href
    $("h2,h3,h4").click(function(){
        if (this.id && this.innerHTML.indexOf("<a") == -1) {
            location.href = "#" + this.id;
        }
    });

    
    
    //should no longer be needed now that we're referencing server-side /slug permalinks
(function () {
    "use strict";
    String.prototype.replaceAll = function(search, replacement) {
        var target = this;
        return target.split(search).join(replacement);
    };

    function fixDoubleBracketLinks(cssSelector) {
        var sidebarText = $(cssSelector)[0].innerHTML;
        var matches = sidebarText.match(/\[\[(.+?)\]\]/g);
        var result = sidebarText;
        if(matches != null) {
            for(var i = 0; i < matches.length; i++) {
                var text = matches[i].replaceAll('[[','').replaceAll(']]','');
                result = result.replace(matches[i],
                    '<a href="' +
                    encodeURIComponent(text.replaceAll(' ','-').toLocaleLowerCase()) +
                    '">' + text + '</a>')
            }
            $(cssSelector).html(result);
        }
    }

    fixDoubleBracketLinks('#page-content-wrapper');
    fixDoubleBracketLinks('#sidebar-wrapper');
})();
    
</script>
    
    
    
</body>
</html>
